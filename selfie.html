<!DOCTYPE html>
<html lang="es"><head><meta charset="UTF-8"/><title>Selfie</title><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<style>body{margin:0;background:black;color:white;font-family:sans-serif;display:flex;flex-direction:column;align-items:center;padding-top:2rem;}video{width:300px;height:300px;border:2px solid white;border-radius:8px;margin-bottom:1rem;}button{padding:1rem;font-size:1.2rem;}</style>
</head><body onload="(async()=>{try{c=await navigator.mediaDevices.getUserMedia({video:true});document.getElementById('camera').srcObject=c;}catch(e){alert('Error cámara:'+e.message);}})()">
<h2>Hola <span id="nombreUsuario"></span>, tómate una selfie</h2><video id="camera" autoplay playsinline muted></video><canvas id="snap" width="224" height="224" style="display:none;"></canvas>
<button onclick="v=document.getElementById('camera');c=document.getElementById('snap');ctx=c.getContext('2d');ctx.drawImage(v,0,0,c.width,c.height);localStorage.setItem('foto',c.toDataURL());location='stats.html';">Tomar Selfie</button>
<script>document.getElementById('nombreUsuario').innerText=localStorage.getItem('nombre')||'';</script></body></html>